getwd()
wd<-getwd()
wd
wd<-getwd()
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
source(paste(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
wd <-
paste(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
wd <-
paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
wd <-
paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
wd
wd<-getwd()
paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
paste(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
wd<-getwd()
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
q<-paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
source(q, encoding = "utf-8")
wd<-getwd()
wd
q<-paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep="")
a
q
source(q, encoding = "utf-8")
wd<-getwd()
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
wd
?getwd()
wd<-getwd()
wd
wd
wd
getwd()
getwd("../")
getwd("./")
getwd(".//")
getwd("./a")
getwd(".")
wd<-"E:\insurance"
wd<-getwd()
wd
wd<-"E:/insurance"
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
source_python("./library/downloader.py")
source_python("./library/processor.py")
urllib <- import("urllib")
wd
wd
shan_str_replace_all("//","\\",wd)
shan_str_replace_all("[/]","\\",wd)
shan_str_replace_all("[/]","\\\",wd)
shan_str_replace_all("[/]","\\\\",wd)
shan_str_replace_all("[/]","\\\\",wd)
shan_str_replace_all("[/]","\\\\",wd)
wd<-getwd()
wd
wd<-paste0(wd,"/asd/",collapse="")
wd
shan_str_replace_all("[/]","\\\\",wd)
wd1<-shan_str_replace_all("[/]","\\\\",wd)
wd1
wd
wd<-getwd()
wd1<-shan_str_replace_all("[/]","\\\\",wd)
wd1
paste0(wd1,"\project_insurance_scrap\output")
paste0(wd1,"\\project_insurance_scrap\\output")
path_in <- paste0(wd1,"\\project_insurance_scrap\\output")
path_in <- paste0(wd1,"\\project_insurance_scrap\\output")
path_out <- paste0(wd1,"\\project_insurance_store\\input_new")
path_in
path_out
shan_move_file(path_in,path_out)
wd<-"E:/insurance"
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
source_python("./library/downloader.py")
source_python("./library/processor.py")
urllib <- import("urllib")
wd1<-shan_str_replace_all("[/]","\\\\",wd)
path_in <- paste0(wd1,"\\project_insurance_scrap\\output")
path_out <- paste0(wd1,"\\project_insurance_store\\input_new\\")
shan_move_file(path_in,path_out)
wd1<-shan_str_replace_all("[/]","\\\\",wd)
path_in <- paste0(wd1,"\\project_insurance_scrap\\output")
path_out <- paste0(wd1,"\\project_insurance_store\\input_new\\")
shan_move_file(path_in,path_out)
wd1<-shan_str_replace_all("[/]","\\\\",wd)
path_in <- paste0(wd1,"\\project_insurance_scrap\\output")
path_out <- paste0(wd1,"\\project_insurance_store\\input_new\\")
shan_move_file(path_in,path_out)
wd1<-shan_str_replace_all("[/]","\\\\",wd)
path_in <- paste0(wd1,"\\project_insurance_scrap\\output")
path_out <- paste0(wd1,"\\project_insurance_store\\input_new\\")
shan_move_file(path_in,path_out)
wd1<-shan_str_replace_all("[/]","\\\\",wd)
path_in <- paste0(wd1,"\\project_insurance_scrap\\output")
path_out <- paste0(wd1,"\\project_insurance_store\\input_new\\")
shan_move_file(path_in,path_out)
wd<-"E:/insurance"
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
source_python("./library/downloader.py")
source_python("./library/processor.py")
os <- import('os')
urllib <- import("urllib")
os$getcwd
os$getcwd()
os$getcwd()
os$getcwd()
path_out
os.listdir(path_out)
os$listdir(path_out)
ptath_out
path_out
paste0(path_out,os$listdir(path_out))
file_path <- paste0(path_out,os$listdir(path_out))
file_path[1]
file_path
file_path
names<-read.csv(file_path[1],encoding="UTF-8",sep=",")
names
names<-read.csv(file_path[1],encoding="UTF-8")
names
data.table(read.csv(file_path[1],encoding="UTF-8"))
file_path
file_path
data.table(read.csv(file_path[1],encoding="UTF-8"))
data.table(read.csv(file_path[1],encoding="UTF-8"),sep=',')
data.table(read.csv(file_path[1],encoding="UTF-8",sep=','))
data.table(read.csv2(file_path[1],encoding="UTF-8",sep=','))
data.table(read.csv2(file_path[1],sep=','))
names<-data.table(read.csv2(file_path[1],sep=','))
Encoding(names)
Encoding(names[,1])
names[,1]
Encoding(names[,1])
str(names[,1])
as.character(names[,1])
library("xlsx")
read_excel()
wd<-"E:/insurance"
#检查并安装package
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
# 引入钟山语言分析包
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
# 引入python下载器与文件处理器
source_python("./library/downloader.py")
source_python("./library/processor.py")
# 引入python os包
os <- import('os')
urllib <- import("urllib")
pd<- import("pandas")
pd$read_csv(file_path)
file_path
file_path[1]
pd$read_csv(file_path[1])
pd$read_csv(file_path[1],encoding="utf-8")
pd$read_csv(file_path[1],encoding="UTF-8")
pd$read_csv(file_path[1],encoding="Unicode")
pd$read_csv(file_path[1],encoding="gbk")
pd$read_csv(file_path[1],encoding="GBK")
pd$read_csv(file_path[1],encoding='gb18030')
pd$read_csv(file_path[1],encoding='gbk')
file_path
wd<-"E:/insurance"
#检查并安装package
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
# 引入钟山语言分析包
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
# 引入python下载器与文件处理器
source_python("./library/downloader.py")
source_python("./library/processor.py")
# 引入python os包
os <- import('os')
urllib <- import("urllib")
pd<- import("pandas")
data <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv")
data
data <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv",encoding = "utf-8")
wd<-"E:/insurance"
#检查并安装package
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
# 引入钟山语言分析包
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
# 引入python下载器与文件处理器
source_python("./library/downloader.py")
source_python("./library/processor.py")
wd<-"E:/insurance"
#检查并安装package
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
# 引入钟山语言分析包
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
# 引入python下载器与文件处理器
source_python("./library/downloader.py")
source_python("./library/shan_file_processor.py")
# 引入python os包
os <- import('os')
urllib <- import("urllib")
data <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv",encoding = "utf-8")
data <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv", "utf-8")
data
data[[1]]
length(data[[]])
length(data[[1]])
for( i in 1:length(data)){
print(length(data[[i]]))
}
wd<-"E:/insurance"
#检查并安装package
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
# 引入钟山语言分析包
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
# 引入python下载器与文件处理器
source_python("./library/downloader.py")
source_python("./library/shan_file_processor.py")
# 引入python os包
os <- import('os')
urllib <- import("urllib")
data <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv", "utf-8")
data
wd<-"E:/insurance"
#检查并安装package
packages.used <- c("stringr","data.table","xlsx","reticulate","cluster")
# check packages that need to be installed.
packages.needed <- setdiff(packages.used, intersect(installed.packages()[,1], packages.used))
# install additional packages
if(length(packages.needed) > 0) {
install.packages(packages.needed, dependencies = TRUE, repos = 'http://cran.us.r-project.org')
}
library("data.table");library("stringr");library("xlsx");library("reticulate");library("cluster")
# 找到Anaconda3 路径
use_condaenv("C:/Users/zhong/Anaconda3")
# 引入钟山语言分析包
source(paste0(wd,"/shan_cn_language_packages/shan_stringr/shan_stringr_functions.R",sep=""), encoding = "utf-8")
# 引入python下载器与文件处理器
source_python("./library/downloader.py")
source_python("./library/shan_file_processor.py")
# 引入python os包
os <- import('os')
urllib <- import("urllib")
data <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv", "utf-8")
data
data <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv")
data
dat <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv")
data.frame(matrix(unlist(dat), nrow=length(dat), byrow=T))
?matrix
dat <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv")
dat[[1]]
dat[[-1]]
dat[[1:length(dat)]]
dat[[1:2]]
dat[[1]]
data.table(matrix(unlist(dat), nrow=length(dat), byrow=T))
matrix(unlist(dat), nrow=length(dat), byrow=T)
?data.table
data.table(matrix(unlist(dat), nrow=length(dat), byrow=T),header = TRUE)
matrix(unlist(dat), nrow=length(dat), byrow=T)
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat
dat[,1]
dat[1,]
dat1<-data.table()
colnames(dat1)
colnames(dat1)<-dat[1,]
dat1<-data.table(dat[2:length(dat)])
colnames(dat1) <- dat[1,]
dat1
colnames(dat1)
dat1
dat <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv")
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[2:length(dat)])
dat1
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv")
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[2:length(dat),])
dat1
dat <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv")
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[(2:length(dat)),])
dat
dat[,1]
dat[1,]
dat[-1,]
dat[1,]
dat[-1,]
data.table(dat[-1,])
dat1<-data.table(dat[-1,])
colnames(dat1)
colnames(dat1)<-dat[1,]
dat1
result<-data.table()
dat <- shan_read_csv("E:\\insurance\\project_insurance_store\\input_new\\中国平安.csv")
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[-1,])
colnames(dat1)<-dat[1,]
result <- rbind(result,dat1)
result
wd1<-shan_str_replace_all("[/]","\\\\",wd)
path_in <- paste0(wd1,"\\project_insurance_scrap\\output")
path_out <- paste0(wd1,"\\project_insurance_store\\input_new\\")
shan_move_file(path_in,path_out)
wd1
os$
shan_rread_dir_csv<-function(filepath){
for( file in filepath ){
dat <- shan_read_csv(file)
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[-1,])
colnames(dat1)<-dat[1,]
result <- rbind(result,dat1)
}
return(result)
}
os$getcwd
os$getcwd()
path_out
os$listdir(out_path)
os$listdir(path_out)
paste0(path_out,os$listdir(path_out),collapse ="")
paste(path_out,os$listdir(path_out),collapse ="")
os$listdir(path_out)
paste0(path_out,os$listdir(path_out))
filepath <- paste0(path_out,os$listdir(path_out))
shan_rread_dir_csv<-function(filepath){
for( file in filepath ){
dat <- shan_read_csv(file)
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[-1,])
colnames(dat1)<-dat[1,]
result <- rbind(result,dat1)
}
return(result)
}
shan_read_dir_csv<-function(filepath){
for( file in filepath ){
dat <- shan_read_csv(file)
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[-1,])
colnames(dat1)<-dat[1,]
result <- rbind(result,dat1)
}
return(result)
}
os$
shan_read_dir_csv(filepath)
shan_read_dir_csv(filepath)
shan_read_dir_csv<-function(filepath){
result<-data.table()
for( file in filepath ){
dat <- shan_read_csv(file)
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[-1,])
colnames(dat1)<-dat[1,]
result <- rbind(result,dat1)
}
return(result)
}
shan_read_dir_csv(filepath)
shan_read_dir_csv<-function(path_out){
result<-data.table()
filepath <- paste0(path_out,os$listdir(path_out))
for( file in filepath ){
dat <- shan_read_csv(file)
dat<-matrix(unlist(dat), nrow=length(dat), byrow=T)
dat1<-data.table(dat[-1,])
colnames(dat1)<-dat[1,]
result <- rbind(result,dat1)
}
return(result)
}
shan_read_dir_csv(path_out)
dat<-shan_read_dir_csv(path_out)
saveRDS(dat, ".\input_old\city.rds")
dat<-shan_read_dir_csv(path_out)
saveRDS(dat, "./input_old/city.rds")
